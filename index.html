<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Stranger Things: Milena ‚ù§Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@900&family=Courier+Prime:wght@400;700&family=Yellowtail&display=block" rel="stylesheet">
    <style>
        :root {
            --st-primary: #ff1e1e;
            --st-primary-light: #ff4444;
            --st-primary-dark: #cc0000;
            --st-secondary: #8b0000;
            --st-text: #e5e7eb;
            --st-text-dim: #9ca3af;
            --st-bg-dark: #050505;
            --st-panel: rgba(15, 15, 20, 0.85);
            --st-panel-border: rgba(255, 30, 30, 0.3);
            --st-glow: 0 0 20px rgba(255, 30, 30, 0.6);
            --st-glow-strong: 0 0 40px rgba(255, 30, 30, 0.8);
            --font-display: 'Merriweather', serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Courier Prime', monospace;
            overflow: hidden;
            background-color: var(--st-bg-dark);
            height: 100dvh;
            width: 100vw;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            color: var(--st-text);
        }

        /* ========== BACKGROUND EFFECTS ========== */
        .upside-down-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 50%, #1a0b0b 0%, #0d0505 50%, #000000 100%);
            z-index: -2;
        }
        
        .fog-layer {
            position: fixed; top: 0; left: 0; width: 200%; height: 100%;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(30, 0, 0, 0.3) 25%, 
                transparent 50%, 
                rgba(40, 0, 0, 0.3) 75%, 
                transparent 100%
            );
            z-index: -1; opacity: 0.7;
            animation: driftFog 45s linear infinite;
            pointer-events: none;
        }
        @keyframes driftFog { 
            from { transform: translateX(0); } 
            to { transform: translateX(-50%); } 
        }
        
        .lightning-flash {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 0%, rgba(255, 30, 30, 0.2) 0%, transparent 70%);
            opacity: 0; z-index: 1;
            animation: flash 12s infinite;
            pointer-events: none;
        }
        @keyframes flash {
            0%, 92%, 100% { opacity: 0; }
            93% { opacity: 0.8; }
            94% { opacity: 0; }
            95% { opacity: 0.5; }
            96% { opacity: 0; }
        }

        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 0, 0, 0.15),
                rgba(0, 0, 0, 0.15) 1px,
                transparent 1px,
                transparent 2px
            );
            z-index: 100; pointer-events: none; opacity: 0.4;
        }

        .vignette {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 40%, rgba(0,0,0,0.7) 100%);
            z-index: 99; pointer-events: none;
        }

        /* ========== PARTICLES ========== */
        .spore {
            position: absolute; width: 4px; height: 4px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.8), rgba(200, 200, 200, 0.2));
            border-radius: 50%; pointer-events: none;
            box-shadow: 0 0 6px rgba(255, 255, 255, 0.4);
            animation: floatSpore 15s infinite linear;
        }
        @keyframes floatSpore {
            0% { transform: translate(0, 0) rotate(0deg) scale(0.5); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translate(var(--mx), var(--my)) rotate(360deg) scale(1); opacity: 0; }
        }

        /* ========== TITLE SECTION ========== */
        .st-title-container {
            position: relative;
            transform: scale(0.95);
            animation: breathe 4s ease-in-out infinite;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .st-title-container:hover {
            transform: scale(1.02);
        }
        @keyframes breathe { 
            0%, 100% { transform: scale(0.95); } 
            50% { transform: scale(1.0); } 
        }

        .st-font { 
            font-family: var(--font-display); 
            font-weight: 900;
            text-transform: uppercase;
            -webkit-text-stroke: 2px var(--st-primary); 
            color: transparent;
            text-shadow: 
                0 0 10px rgba(255, 30, 30, 0.8),
                0 0 20px rgba(255, 30, 30, 0.5),
                0 0 30px rgba(255, 30, 30, 0.3);
            letter-spacing: -3px;
            line-height: 0.85;
            transition: all 0.5s ease;
            filter: drop-shadow(0 5px 15px rgba(255, 30, 30, 0.4));
        }
        
        .st-font:hover {
            text-shadow: 
                0 0 20px rgba(255, 30, 30, 1),
                0 0 40px rgba(255, 30, 30, 0.8),
                0 0 60px rgba(255, 30, 30, 0.6);
            -webkit-text-stroke: 2.5px var(--st-primary-light);
        }
        
        .st-font-filled {
            font-family: var(--font-display); 
            font-weight: 900;
            color: var(--st-primary);
            text-transform: uppercase;
            text-shadow: 
                0 0 15px var(--st-primary),
                0 0 30px var(--st-primary),
                0 5px 20px rgba(0, 0, 0, 0.5);
            letter-spacing: -1px;
            transition: all 0.3s ease;
        }
        
        .st-bar {
            height: 4px; 
            background: linear-gradient(90deg, 
                transparent 0%, 
                var(--st-primary) 20%, 
                var(--st-primary-light) 50%, 
                var(--st-primary) 80%, 
                transparent 100%
            );
            box-shadow: 
                0 0 15px var(--st-primary),
                0 0 30px var(--st-primary),
                0 2px 10px rgba(255, 30, 30, 0.5);
            margin: 12px auto;
            width: 0;
            animation: expandBar 2s ease-out forwards 0.5s;
        }
        @keyframes expandBar { 
            to { width: 65%; } 
        }

        /* ========== GLASS PANEL ========== */
        .glass-panel {
            background: var(--st-panel);
            border: 2px solid var(--st-panel-border);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.4),
                0 0 0 1px rgba(255, 255, 255, 0.05) inset,
                0 0 40px rgba(255, 30, 30, 0.1);
            border-radius: 24px;
            backdrop-filter: blur(12px) saturate(150%);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        .glass-panel::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.05), 
                transparent
            );
            transition: left 0.5s ease;
        }
        .glass-panel:hover::before {
            left: 100%;
        }
        .glass-panel:hover {
            border-color: rgba(255, 30, 30, 0.5);
            box-shadow: 
                0 12px 48px rgba(0, 0, 0, 0.5),
                0 0 60px rgba(255, 30, 30, 0.2);
        }

        /* ========== TIMERS ========== */
        .timer-val { 
            font-weight: 700; 
            color: #fff; 
            text-shadow: 
                0 0 15px rgba(255, 255, 255, 0.6),
                0 2px 10px rgba(0, 0, 0, 0.5);
            font-family: var(--font-display); 
            transition: all 0.3s ease;
            letter-spacing: 1px;
        }
        .timer-val:hover {
            transform: scale(1.05);
            text-shadow: 
                0 0 25px rgba(255, 255, 255, 0.8),
                0 0 40px rgba(255, 30, 30, 0.4);
        }
        
        .timer-label { 
            color: var(--st-text-dim); 
            font-size: 0.65rem; 
            letter-spacing: 3px; 
            text-transform: uppercase; 
            font-weight: bold; 
            transition: color 0.3s ease;
        }

        .timer-container {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 30, 30, 0.2);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }
        .timer-container:hover {
            background: rgba(0, 0, 0, 0.4);
            border-color: rgba(255, 30, 30, 0.4);
            transform: translateY(-2px);
        }

        /* ========== CHRISTMAS LIGHTS ========== */
        .lights-container {
            position: absolute; 
            top: -12px; 
            width: 100%; 
            display: flex; 
            justify-content: space-around; 
            z-index: 5;
            pointer-events: none;
        }
        .light-bulb {
            width: 16px; height: 24px; border-radius: 50%;
            opacity: 0.4; 
            transition: all 0.15s ease;
            position: relative;
            filter: brightness(0.8);
        }
        .light-bulb::before {
            content: ''; 
            position: absolute; 
            top: -12px; 
            left: 50%; 
            transform: translateX(-50%);
            width: 2px; 
            height: 12px; 
            background: #1a1a1a;
        }
        
        .l-active { 
            opacity: 1 !important; 
            box-shadow: 0 0 25px currentColor, 0 0 40px currentColor; 
            transform: scale(1.3);
            filter: brightness(1.2);
        }
        
        .l-0 { background: #ef4444; color: #ef4444; }
        .l-1 { background: #3b82f6; color: #3b82f6; }
        .l-2 { background: #eab308; color: #eab308; }
        .l-3 { background: #22c55e; color: #22c55e; }
        .l-4 { background: #a855f7; color: #a855f7; }
        .l-5 { background: #f97316; color: #f97316; }

        /* ========== BUTTONS ========== */
        .btn-interact {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.5), rgba(20, 0, 0, 0.4));
            border: 2px solid var(--st-primary);
            color: var(--st-primary);
            font-weight: bold;
            letter-spacing: 2px;
            text-transform: uppercase;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(255, 30, 30, 0.2);
        }
        .btn-interact::before {
            content: '';
            position: absolute;
            top: 50%; left: 50%;
            width: 0; height: 0;
            background: rgba(255, 30, 30, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }
        .btn-interact:hover::before {
            width: 300px; height: 300px;
        }
        .btn-interact:hover {
            background: linear-gradient(135deg, rgba(255, 30, 30, 0.2), rgba(139, 0, 0, 0.3));
            border-color: var(--st-primary-light);
            box-shadow: 
                0 6px 25px rgba(255, 30, 30, 0.4),
                0 0 40px rgba(255, 30, 30, 0.3);
            transform: translateY(-2px);
        }
        .btn-interact:active {
            transform: translateY(0);
        }

        .fab-btn {
            position: absolute;
            background: linear-gradient(135deg, var(--st-bg-dark), rgba(20, 0, 0, 0.9));
            border: 2px solid var(--st-primary);
            color: var(--st-primary);
            border-radius: 50%;
            width: 64px; height: 64px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.6),
                0 0 30px rgba(255, 30, 30, 0.3);
            z-index: 60;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            text-decoration: none;
            cursor: pointer;
        }
        .fab-btn:hover {
            transform: scale(1.15) rotate(5deg);
            border-color: var(--st-primary-light);
            box-shadow: 
                0 12px 40px rgba(0, 0, 0, 0.7),
                0 0 50px rgba(255, 30, 30, 0.6);
        }
        .fab-btn:active {
            transform: scale(1.05);
        }

        .envelope-btn { bottom: 1.5rem; right: 1.5rem; }
        .quiz-btn { bottom: 1.5rem; left: 1.5rem; }
        .ranking-btn { top: 1.5rem; right: 1.5rem; }
        .challenge-btn { top: 1.5rem; left: 1.5rem; }

        /* ========== MODAL ========== */
        .modal-overlay {
            position: fixed; 
            top: 0; left: 0; 
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.96);
            backdrop-filter: blur(10px);
            z-index: 1000; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            opacity: 0; 
            pointer-events: none; 
            transition: all 0.4s ease;
        }
        .modal-active { 
            opacity: 1; 
            pointer-events: auto; 
        }
        
        .letter-paper {
            background: linear-gradient(135deg, #f5f5dc 0%, #e8e8d0 100%);
            width: 90%; 
            max-width: 520px; 
            padding: 2.5rem;
            transform: translateY(30px) scale(0.9) rotateX(10deg); 
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            color: #1a1a1a; 
            font-weight: 500; 
            border: 3px solid #8b7355;
            background-image: 
                repeating-linear-gradient(transparent 0px, transparent 24px, rgba(0, 0, 0, 0.05) 25px),
                linear-gradient(135deg, #f5f5dc 0%, #e8e8d0 100%);
            line-height: 26px;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.5),
                0 0 0 1px rgba(255, 255, 255, 0.3) inset;
            border-radius: 8px;
        }
        .modal-active .letter-paper { 
            transform: translateY(0) scale(1) rotateX(0); 
        }

        /* ========== START OVERLAY ========== */
        #start-overlay {
            position: fixed; 
            top: 0; left: 0; 
            width: 100%; height: 100%;
            background: linear-gradient(135deg, #000000 0%, #0d0000 100%);
            z-index: 999;
            display: flex; 
            align-items: center; 
            justify-content: center;
            transition: opacity 1s ease;
        }
        .overlay-disabled { 
            pointer-events: none; 
            opacity: 0.9; 
        }

        /* ========== DEMOGORGON ========== */
        #demogorgon-egg {
            position: fixed; 
            bottom: -160px; 
            right: -60px;
            width: 140px; 
            height: 140px;
            z-index: 90; 
            pointer-events: none;
            filter: drop-shadow(0 10px 30px rgba(139, 0, 0, 0.6));
            transition: bottom 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        .demo-peek { 
            bottom: -20px !important; 
        }

        #spell-text {
            position: absolute; 
            top: 35px; 
            width: 100%; 
            text-align: center;
            font-family: 'Courier Prime', monospace; 
            font-weight: bold; 
            font-size: 1.75rem; 
            color: #fff; 
            text-shadow: 
                0 0 20px #fff,
                0 0 40px var(--st-primary),
                0 0 60px var(--st-primary);
            opacity: 0; 
            transition: opacity 0.3s ease;
            letter-spacing: 8px;
        }

        /* ========== FLOATING HEARTS ========== */
        .element-float {
            position: absolute; 
            color: var(--st-primary); 
            text-shadow: 
                0 0 15px var(--st-primary),
                0 0 30px var(--st-primary);
            animation: floatUp 2.5s ease-out forwards; 
            pointer-events: none; 
            z-index: 101;
            filter: drop-shadow(0 0 10px rgba(255, 30, 30, 0.8));
        }
        @keyframes floatUp { 
            0% { 
                opacity: 1; 
                transform: translateY(0) scale(0.5) rotate(0deg); 
            } 
            100% { 
                opacity: 0; 
                transform: translateY(-120px) scale(1.3) rotate(180deg); 
            } 
        }

        /* ========== CHAPTER TEXT ========== */
        #chapter-text {
            transition: opacity 0.6s ease;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        /* ========== TYPEWRITER EFFECT ========== */
        #typewriter-text {
            min-height: 3.5rem;
            background: linear-gradient(90deg, 
                var(--st-primary-light), 
                #fff, 
                var(--st-primary-light)
            );
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 3s linear infinite;
        }
        @keyframes shimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }

        /* ========== LOVE REASON ========== */
        #love-reason {
            background: linear-gradient(135deg, rgba(255, 30, 30, 0.1), rgba(139, 0, 0, 0.05));
            border-left: 4px solid var(--st-primary);
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(255, 30, 30, 0.2);
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 640px) {
            .st-font { font-size: 2.75rem; letter-spacing: -2px; }
            .fab-btn { width: 56px; height: 56px; }
            .fab-btn svg { width: 20px; height: 20px; }
            .timer-val { font-size: 2.25rem !important; }
            .glass-panel { padding: 1.25rem; }
        }

        @media (max-width: 380px) {
            .st-font { font-size: 2.25rem; }
            .timer-val { font-size: 1.875rem !important; }
        }

        /* ========== CUSTOM SCROLLBAR ========== */
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { 
            background: rgba(0, 0, 0, 0.3); 
            border-radius: 10px; 
        }
        .custom-scrollbar::-webkit-scrollbar-thumb { 
            background: var(--st-primary); 
            border-radius: 10px; 
            box-shadow: 0 0 10px var(--st-primary);
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { 
            background: var(--st-primary-light); 
        }

        /* ========== GLITCH EFFECT ========== */
        @keyframes glitch-anim {
            0% { clip-path: inset(20% 0 60% 0); transform: translate(-3px, 2px); }
            20% { clip-path: inset(50% 0 20% 0); transform: translate(3px, -2px); }
            40% { clip-path: inset(30% 0 40% 0); transform: translate(-2px, 3px); }
            60% { clip-path: inset(70% 0 10% 0); transform: translate(2px, -3px); }
            80% { clip-path: inset(10% 0 80% 0); transform: translate(-1px, 2px); }
            100% { clip-path: inset(40% 0 30% 0); transform: translate(1px, -1px); }
        }
        
        .glitch-active {
            animation: glitch-anim 0.2s infinite;
            filter: hue-rotate(90deg) contrast(1.3) brightness(1.2);
        }

        .frenetic-lights .light-bulb {
            animation: frenzy 0.08s infinite !important;
            opacity: 1 !important;
        }
        @keyframes frenzy {
            0%, 100% { opacity: 1; transform: scale(1.3); }
            50% { opacity: 0.3; transform: scale(0.9); }
        }
    </style>
</head>
<body>

    <div class="scanlines"></div>
    <div class="vignette"></div>
    
    <div class="upside-down-bg"></div>
    <div class="fog-layer"></div>
    <div class="lightning-flash"></div>
    
    <div class="lights-container" id="lights-container">
        <div class="light-bulb l-0"></div>
        <div class="light-bulb l-1"></div>
        <div class="light-bulb l-2"></div>
        <div class="light-bulb l-3"></div>
        <div class="light-bulb l-4"></div>
        <div class="light-bulb l-5"></div>
    </div>
    <div id="spell-text"></div>

    <div id="spores-container" class="absolute inset-0 overflow-hidden pointer-events-none z-0"></div>
    
    <audio id="bg-music" loop preload="auto">
        <source src="https://stream.nightride.fm/nightride.m4a" type="audio/mp4">
        <source src="https://ice6.securenetsystems.net/RO80S" type="audio/mpeg">
    </audio>

    <div id="demogorgon-egg">
        <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g class="demo-head" style="animation: bounce 2s ease-in-out infinite;">
                <path d="M50 20 L60 5 L70 20 Z" fill="#881337" />
                <path d="M75 35 L95 30 L80 45 Z" fill="#881337" />
                <path d="M75 65 L95 70 L80 55 Z" fill="#881337" />
                <path d="M50 80 L60 95 L70 80 Z" fill="#881337" />
                <path d="M25 65 L5 70 L20 55 Z" fill="#881337" />
                <path d="M25 35 L5 30 L20 45 Z" fill="#881337" />
                <circle cx="50" cy="50" r="25" fill="#4c0519" />
                <circle cx="40" cy="45" r="2.5" fill="white" />
                <circle cx="60" cy="45" r="2.5" fill="white" />
                <path d="M40 60 Q50 72 60 60" stroke="white" stroke-width="2.5" stroke-linecap="round" />
            </g>
        </svg>
    </div>

    <!-- TELA INICIAL -->
    <div id="start-overlay" class="overlay-disabled">
        <div class="flex flex-col items-center justify-center h-full w-full cursor-pointer z-50 p-6" onclick="startExperience()">
            
            <div class="st-title-container mb-16 text-center" onclick="triggerWaffles(event)">
                <h1 class="st-font text-7xl md:text-9xl leading-none">PARA<br>MILENA</h1>
                <div class="st-bar"></div>
                <p id="chapter-text" class="text-white font-bold tracking-[0.5em] text-xs uppercase mt-3 opacity-80 h-5">Cap√≠tulo Um: O In√≠cio</p>
            </div>

            <div class="flex flex-col items-center gap-5 mt-8">
                <p id="start-text" class="text-red-600 font-bold tracking-[0.25em] text-sm uppercase animate-pulse">Sintonizando R√°dio...</p>
                <div id="start-icon" class="w-10 h-10 border-2 border-red-900 border-t-red-500 rounded-full animate-spin"></div>
            </div>
        </div>
    </div>

    <!-- CONTE√öDO PRINCIPAL -->
    <div id="main-content" class="relative z-10 w-full h-full flex flex-col items-center justify-center p-4 opacity-0 transition-opacity duration-1000 hidden">
        
        <div class="glass-panel w-full max-w-lg p-8 text-center relative flex flex-col items-center max-h-[94dvh] overflow-y-auto custom-scrollbar">
            
            <h3 id="greeting-text" class="st-font-filled text-3xl mb-5 mt-2">Transmiss√£o Recebida</h3>
            
            <p id="timer-label" class="text-[11px] tracking-[0.3em] uppercase text-gray-400 mb-10 font-bold">Tempo para abertura do portal</p>
            
            <div class="timer-container w-full mb-10">
                <div class="flex justify-center items-start gap-3 w-full text-white">
                    <div class="flex flex-col items-center flex-1">
                        <span id="days" class="timer-val text-5xl md:text-6xl">00</span>
                        <span class="timer-label mt-1">Dias</span>
                    </div>
                    <span class="text-3xl text-red-600 mt-2 timer-sep">:</span>
                    <div class="flex flex-col items-center flex-1">
                        <span id="hours" class="timer-val text-5xl md:text-6xl">00</span>
                        <span class="timer-label mt-1">Horas</span>
                    </div>
                    <span class="text-3xl text-red-600 mt-2 timer-sep">:</span>
                    <div class="flex flex-col items-center flex-1">
                        <span id="minutes" class="timer-val text-5xl md:text-6xl">00</span>
                        <span class="timer-label mt-1">Min</span>
                    </div>
                    <span class="text-3xl text-red-600 mt-2 timer-sep">:</span>
                    <div class="flex flex-col items-center flex-1">
                        <span id="seconds" class="timer-val text-5xl md:text-6xl">00</span>
                        <span class="timer-label mt-1">Seg</span>
                    </div>
                </div>
            </div>

            <div id="small-timer-box" class="mb-10 w-full timer-container">
                <p class="text-[10px] tracking-[0.25em] uppercase text-gray-400 mb-3 font-bold">TEMPO DESDE O PRIMEIRO CONTATO</p>
                <div class="flex items-center justify-center gap-2">
                    <p id="past-time" class="text-white text-lg sm:text-xl font-bold font-mono">Calculando...</p>
                </div>
            </div>

            <div class="min-h-[4rem] flex items-center justify-center mb-8 px-2">
                <h2 id="typewriter-text" class="text-2xl font-bold text-center tracking-wider"></h2>
            </div>

            <div class="flex flex-col gap-4 w-full items-center pb-3">
                <button onclick="showLoveReason(event)" class="btn-interact px-8 py-4 rounded-xl text-sm font-bold tracking-[0.25em] uppercase w-full max-w-xs relative z-10">
                    Decodificar Mensagem
                </button>
            </div>
            
            <p id="love-reason" class="min-h-[2rem] mt-4 text-white font-bold text-base transition-all duration-500 opacity-0 transform translate-y-3 px-3"></p>

            <div class="h-10"></div>
        </div>
    </div>

    <!-- Bot√µes FAB -->
    <a href="ranking.html" class="fab-btn ranking-btn hidden" id="ranking-trigger" aria-label="Ver Ranking">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
        </svg>
    </a>

    <a href="challenge.html" class="fab-btn challenge-btn hidden" id="challenge-trigger" aria-label="Desafio 15 Dias">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
    </a>

    <a href="quiz.html" class="fab-btn quiz-btn hidden" id="quiz-trigger" aria-label="Jogar Quiz">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
    </a>

    <button onclick="toggleLetter()" class="fab-btn envelope-btn hidden" id="envelope-trigger" aria-label="Abrir carta">
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
            <polyline points="22,6 12,13 2,6"></polyline>
        </svg>
    </button>

    <!-- Modal da Carta -->
    <div id="letter-modal" class="modal-overlay" onclick="toggleLetter()">
        <div class="letter-paper" onclick="event.stopPropagation()">
            <div class="absolute top-3 right-3 p-2 opacity-60 hover:opacity-100 cursor-pointer text-black transition-opacity" onclick="toggleLetter()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </div>
            <h3 class="st-font-filled text-2xl mb-6 text-center" style="color: #8b0000;">CONFIDENCIAL - PARA MILENA</h3>
            <div class="letter-content text-sm md:text-base leading-relaxed">
                <p class="mb-4">Escrevo isso enquanto conto os segundos para te ver. Cada momento longe parece uma eternidade, mas saber que logo estarei com voc√™ faz tudo valer a pena.</p>
                <p class="mt-6">Mal posso esperar pelo nosso dia 26. Meu cora√ß√£o √© todo seu e a ansiedade s√≥ aumenta para o nosso reencontro. Te amo!</p>
            </div>
            <div class="flex justify-end items-end mt-10 border-t-2 border-gray-400 pt-3">
                <p class="text-right font-bold text-lg mr-2 mb-0" style="font-family: 'Yellowtail', cursive; color: #8b0000; font-size: 1.5rem;">- Com amor, Andressa</p>
            </div>
        </div>
    </div>

    <script>
        // CONFIGURA√á√ïES
        const targetDate = new Date("2026-01-26T20:00:00").getTime();
        const firstKissDate = new Date("2025-09-07T23:00:00").getTime();
        const mainPhrase = "Eu iria at√© o Mundo Invertido por voc√™";
        
        const reasons = [
            "Amigos n√£o mentem, e meu amor tamb√©m n√£o.",
            "Voc√™ √© meu 11 em uma escala de 10.",
            "Por voc√™, eu enfrentaria o Vecna.",
            "Promessa √© algo que n√£o se pode quebrar.",
            "Voc√™ faz minha vida virar de cabe√ßa para baixo (do jeito bom).",
            "Juntas, somos mais fortes que qualquer monstro.",
            "Voc√™ √© a luz na minha parede.",
            "A vida sem voc√™ √© como um waffle sem maple syrup."
        ];

        let player;
        let isPlayerReady = false;

        document.fonts.ready.then(() => {
            const startContent = document.getElementById('start-content');
            if(startContent) { startContent.classList.add('fonts-loaded-active'); }
        });

        const audio = document.getElementById('bg-music');
        
        audio.oncanplay = function() {
            if(!isPlayerReady) {
                isPlayerReady = true;
                updateStartScreenReady();
            }
        };
        
        setTimeout(() => { if(!isPlayerReady) { isPlayerReady = true; updateStartScreenReady(); } }, 3000);

        function updateStartScreenReady() {
            const textEl = document.getElementById('start-text');
            const iconEl = document.getElementById('start-icon');
            const overlay = document.getElementById('start-overlay');
            if(textEl) { 
                textEl.innerText = "TOQUE PARA COME√áAR"; 
                textEl.classList.remove('animate-pulse'); 
                textEl.classList.add('animate-bounce'); 
            }
            if(iconEl) { 
                iconEl.innerHTML = '<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>'; 
                iconEl.classList.remove('animate-spin'); 
                iconEl.className = "w-14 h-14 rounded-full bg-red-900/50 text-red-500 flex items-center justify-center border-2 border-red-500 shadow-[0_0_20px_red]";
            }
            if(overlay) { overlay.classList.remove('overlay-disabled'); }
        }

        function triggerWaffles(e) {
            e.stopPropagation();
            for(let i=0; i<20; i++) {
                setTimeout(() => {
                    const x = Math.random() * window.innerWidth;
                    createWaffleAt(x, -50);
                }, i * 120);
            }
        }

        function createWaffleAt(x, y) {
            const el = document.createElement('div');
            el.innerHTML = 'üßá';
            el.style.position = 'fixed';
            el.style.left = x + 'px'; 
            el.style.top = y + 'px';
            el.style.fontSize = (Math.random() * 2 + 1.5) + 'rem';
            el.style.pointerEvents = 'none'; 
            el.style.zIndex = '101';
            el.style.filter = 'drop-shadow(0 0 10px rgba(255, 200, 100, 0.8))';
            el.style.animation = `fall ${Math.random() * 2 + 2.5}s ease-in forwards`;
            
            if (!document.getElementById('fall-style')) {
                const style = document.createElement('style');
                style.id = 'fall-style';
                style.innerHTML = `@keyframes fall { to { transform: translateY(110vh) rotate(720deg) scale(0.5); opacity: 0; } }`;
                document.head.appendChild(style);
            }
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 5000);
        }

        const chapters = ["Cap√≠tulo Um: O In√≠cio", "Cap√≠tulo Dois: A Saudade", "Cap√≠tulo Tr√™s: O Reencontro"];
        let currentChapter = 0;
        
        function rotateChapters() {
            const el = document.getElementById('chapter-text');
            if(!el) return;
            
            setInterval(() => {
                el.style.opacity = '0';
                setTimeout(() => {
                    currentChapter = (currentChapter + 1) % chapters.length;
                    el.innerText = chapters[currentChapter];
                    el.style.opacity = '0.8';
                }, 600);
            }, 5000);
        }
        rotateChapters();

        document.addEventListener('click', (e) => {
            if(e.target.closest('button') || e.target.closest('a')) return;
            if(!e.target.closest('.st-title-container')) {
                createHeartAt(e.clientX, e.clientY);
            }
        });

        function createHeartAt(x, y) {
            const el = document.createElement('div');
            el.innerHTML = '‚ù§Ô∏è';
            el.className = 'element-float';
            el.style.left = x + 'px'; 
            el.style.top = y + 'px';
            el.style.fontSize = (Math.random() * 2 + 1.2) + 'rem';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 2500);
        }

        const lights = document.querySelectorAll('.light-bulb');
        const milenaSeq = [0, 1, 2, 4, 3, 5];
        const letters = ['M', 'I', 'L', 'E', 'N', 'A'];
        let spelling = false;

        function startSpellingSequence() {
            if(spelling) return;
            spelling = true;
            let i = 0;
            lights.forEach(l => l.style.animation = 'none');
            const interval = setInterval(() => {
                lights.forEach(l => l.classList.remove('l-active'));
                if(i < milenaSeq.length) {
                    const idx = milenaSeq[i];
                    lights[idx].classList.add('l-active');
                    const textDisplay = document.getElementById('spell-text');
                    textDisplay.innerText = letters[i];
                    textDisplay.style.opacity = 1;
                    i++;
                } else {
                    clearInterval(interval);
                    document.getElementById('spell-text').style.opacity = 0;
                    setTimeout(() => {
                        lights.forEach(l => {
                            l.classList.remove('l-active');
                        });
                        spelling = false;
                    }, 1000);
                }
            }, 900);
        }
        setInterval(startSpellingSequence, 18000);

        function startExperience() {
            if(!isPlayerReady) return;
            
            audio.volume = 0;
            audio.play().then(() => {
                let vol = 0;
                const fade = setInterval(() => {
                    vol += 0.05;
                    if (vol >= 1) { 
                        vol = 1;
                        clearInterval(fade);
                    }
                    audio.volume = vol; 
                }, 200);
            }).catch(e => console.log("Audio play failed", e));

            setGreeting();
            const overlay = document.getElementById('start-overlay');
            const content = document.getElementById('main-content');
            const fab = document.getElementById('envelope-trigger');
            const quizBtn = document.getElementById('quiz-trigger');
            const rankingBtn = document.getElementById('ranking-trigger');
            const challengeBtn = document.getElementById('challenge-trigger');
            
            overlay.style.opacity = '0';
            setTimeout(() => {
                overlay.style.display = 'none';
                content.classList.remove('hidden');
                fab.classList.remove('hidden');
                quizBtn.classList.remove('hidden');
                rankingBtn.classList.remove('hidden');
                challengeBtn.classList.remove('hidden');
                void content.offsetWidth;
                content.classList.remove('opacity-0');
            }, 800);

            setInterval(updateTimers, 1000);
            updateTimers();
            startSpores();
            setTimeout(typeWriter, 1200);
        }

        function setGreeting() {
            const h = new Date().getHours();
            const el = document.getElementById('greeting-text');
            const greet = h < 12 ? "BOM DIA" : h < 18 ? "BOA TARDE" : "BOA NOITE";
            el.innerText = `${greet}, AMOR`;
        }

        function updateTimers() {
            const now = new Date().getTime();
            const distance = targetDate - now;
            const pastDiff = now - firstKissDate;

            if (pastDiff > 0) {
                const pd = Math.floor(pastDiff / (1000 * 60 * 60 * 24));
                const ph = Math.floor((pastDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const pm = Math.floor((pastDiff % (1000 * 60 * 60)) / (1000 * 60));
                const ps = Math.floor((pastDiff % (1000 * 60)) / 1000);
                
                if (distance >= 0) {
                    document.getElementById('past-time').innerText = `${pd}d ${ph}h ${pm}m ${ps}s`;
                }
            }

            if (distance < 0) {
                const pd = Math.floor(pastDiff / (1000 * 60 * 60 * 24));
                const ph = Math.floor((pastDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const pm = Math.floor((pastDiff % (1000 * 60 * 60)) / (1000 * 60));
                const ps = Math.floor((pastDiff % (1000 * 60)) / 1000);

                document.getElementById('days').innerText = String(pd).padStart(2, '0');
                document.getElementById('hours').innerText = String(ph).padStart(2, '0');
                document.getElementById('minutes').innerText = String(pm).padStart(2, '0');
                document.getElementById('seconds').innerText = String(ps).padStart(2, '0');
                document.getElementById('timer-label').innerText = "NOSSA HIST√ìRIA CONTINUA...";
                document.getElementById('past-time').innerText = "Desde o in√≠cio...";
            } else {
                const d = Math.floor(distance / (1000 * 60 * 60 * 24));
                const h = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const s = Math.floor((distance % (1000 * 60)) / 1000);
                
                document.getElementById('days').innerText = String(d).padStart(2, '0');
                document.getElementById('hours').innerText = String(h).padStart(2, '0');
                document.getElementById('minutes').innerText = String(m).padStart(2, '0');
                document.getElementById('seconds').innerText = String(s).padStart(2, '0');
            }
        }

        let typeIdx = 0;
        function typeWriter() {
            if (typeIdx < mainPhrase.length) {
                document.getElementById("typewriter-text").innerHTML += mainPhrase.charAt(typeIdx);
                typeIdx++; 
                setTimeout(typeWriter, 90);
            }
        }

        function toggleLetter() { 
            document.getElementById('letter-modal').classList.toggle('modal-active'); 
        }

        function showLoveReason(e) {
            e.stopPropagation();
            const el = document.getElementById('love-reason');
            el.classList.remove('opacity-100', 'translate-y-0');
            el.classList.add('opacity-0', 'translate-y-3');
            
            const mainContent = document.getElementById('main-content');
            const lightsContainer = document.getElementById('lights-container');
            
            mainContent.classList.add('glitch-active');
            lightsContainer.classList.add('frenetic-lights');
            
            setTimeout(() => {
                mainContent.classList.remove('glitch-active');
                lightsContainer.classList.remove('frenetic-lights');
            }, 900);
            
            setTimeout(() => {
                el.innerText = reasons[Math.floor(Math.random() * reasons.length)];
                el.classList.remove('opacity-0', 'translate-y-3');
                el.classList.add('opacity-100', 'translate-y-0');
                
                const burst = document.createElement('div');
                burst.style.position = 'fixed';
                burst.style.top = '0'; burst.style.left = '0'; 
                burst.style.width = '100%'; burst.style.height = '100%';
                burst.style.background = 'radial-gradient(circle, rgba(255,30,30,0.3) 0%, transparent 70%)';
                burst.style.pointerEvents = 'none';
                burst.style.transition = 'opacity 0.6s';
                burst.style.zIndex = '98';
                document.body.appendChild(burst);
                setTimeout(() => burst.style.opacity = '0', 100);
                setTimeout(() => burst.remove(), 700);
            }, 350);
        }

        function startSpores() {
            const container = document.getElementById('spores-container');
            for(let i=0; i<50; i++) {
                const p = document.createElement('div');
                p.classList.add('spore');
                p.style.left = Math.random() * 100 + '%'; 
                p.style.top = Math.random() * 100 + '%';
                const mx = (Math.random() * 60 - 30) + 'px'; 
                const my = (Math.random() * 60 - 30) + 'px';
                p.style.setProperty('--mx', mx); 
                p.style.setProperty('--my', my);
                p.style.animationDelay = (Math.random() * 8) + 's';
                p.style.animationDuration = (Math.random() * 12 + 10) + 's';
                container.appendChild(p);
            }
        }

        // Demogorgon peek
        let demoTimer;
        document.addEventListener('mousemove', () => {
            clearTimeout(demoTimer);
            document.getElementById('demogorgon-egg').classList.remove('demo-peek');
            demoTimer = setTimeout(() => {
                document.getElementById('demogorgon-egg').classList.add('demo-peek');
                setTimeout(() => {
                    document.getElementById('demogorgon-egg').classList.remove('demo-peek');
                }, 3000);
            }, 8000);
        });
    </script>
</body>
</html>
