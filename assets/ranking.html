<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ranking Global - Andressa & Milena ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@900&family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/ranking-styles.css">
</head>
<body>
    <!-- Background Effects -->
    <div class="scanlines"></div>
    <div class="vignette"></div>
    <div class="upside-down-bg"></div>
    <div class="fog-layer"></div>
    <div class="lightning-flash"></div>
    
    <!-- Particles Container -->
    <div id="particles-container"></div>

    <!-- Main Container -->
    <div class="ranking-container">
        
        <!-- Header -->
        <div class="ranking-header">
            <button class="btn-back" onclick="window.location.href='index.html'" aria-label="Voltar">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            
            <div class="header-title">
                <h1 class="st-title">RANKING</h1>
                <div class="st-bar"></div>
                <p class="subtitle">Sistema de Conquistas</p>
            </div>
        </div>

        <!-- Leaderboard -->
        <div class="leaderboard-section">
            <h2 class="section-title">üèÜ PLACAR GERAL</h2>
            <div class="leaderboard" id="leaderboard"></div>
        </div>

        <!-- Player Profiles -->
        <div class="profiles-section">
            <h2 class="section-title">üë• PERFIS DOS JOGADORES</h2>
            <div class="profiles-grid" id="profiles-grid"></div>
        </div>

        <!-- Global Achievements -->
        <div class="achievements-section">
            <h2 class="section-title">üèÖ TODAS AS CONQUISTAS</h2>
            <div class="achievements-grid" id="achievements-grid"></div>
        </div>

        <!-- Quick Access Buttons -->
        <div class="quick-access">
            <a href="quiz.html" class="quick-btn">
                <span class="quick-icon">‚ùì</span>
                <span class="quick-label">Quiz</span>
            </a>
            <a href="challenge.html" class="quick-btn">
                <span class="quick-icon">üéØ</span>
                <span class="quick-label">Desafio 15 Dias</span>
            </a>
            <a href="index.html" class="quick-btn">
                <span class="quick-icon">üè†</span>
                <span class="quick-label">In√≠cio</span>
            </a>
        </div>

        <!-- Reset Button (hidden by default) -->
        <button class="btn-reset" onclick="confirmReset()">
            Resetar Tudo (Dev Only)
        </button>

    </div>

    <!-- Modal de Reset -->
    <div id="reset-modal" class="modal hidden">
        <div class="modal-content">
            <h3 class="modal-title">‚ö†Ô∏è Resetar Sistema</h3>
            <p class="modal-text">Tem certeza? TODOS os dados de TODOS os jogadores ser√£o apagados!</p>
            <div class="modal-buttons">
                <button class="btn-danger" onclick="resetAll()">
                    SIM, APAGAR TUDO
                </button>
                <button class="btn-secondary" onclick="closeModal()">
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <script src="assets/ranking-system.js"></script>
    <script>
        // ==================== RENDER LEADERBOARD ====================
        function renderLeaderboard() {
            const leaderboard = RankingSystem.getLeaderboard();
            const container = document.getElementById('leaderboard');
            
            container.innerHTML = leaderboard.map((player, index) => {
                const position = index + 1;
                const medal = position === 1 ? 'ü•á' : position === 2 ? 'ü•à' : '';
                const percentage = (player.totalXP / 4700 * 100).toFixed(1);
                
                return `
                    <div class="leaderboard-item ${position === 1 ? 'first-place' : ''}">
                        <div class="position">${medal || position}</div>
                        <div class="player-info">
                            <div class="player-avatar">
                                <img src="assets/${player.name.toLowerCase()}-avatar.svg" alt="${player.name}">
                            </div>
                            <div class="player-details">
                                <h3 class="player-name">${player.name}</h3>
                                <p class="player-rank">${player.currentRank.icon} ${player.currentRank.name}</p>
                            </div>
                        </div>
                        <div class="player-xp">
                            <span class="xp-value">${player.totalXP}</span>
                            <span class="xp-label">XP</span>
                            <div class="xp-bar-container">
                                <div class="xp-bar" style="width: ${percentage}%"></div>
                            </div>
                            <span class="xp-percentage">${percentage}% do total</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ==================== RENDER PROFILES ====================
        function renderProfiles() {
            const players = RankingSystem.getAllPlayers();
            const container = document.getElementById('profiles-grid');
            
            container.innerHTML = players.map(player => {
                const stats = RankingSystem.getPlayerStats(player.name);
                const rankProgress = ((player.totalXP - player.currentRank.minXP) / (player.currentRank.maxXP - player.currentRank.minXP) * 100).toFixed(1);
                
                return `
                    <div class="profile-card">
                        <div class="profile-header">
                            <div class="profile-avatar">
                                <img src="assets/${player.name.toLowerCase()}-avatar.svg" alt="${player.name}">
                            </div>
                            <div class="profile-info">
                                <h3 class="profile-name">${player.name}</h3>
                                <p class="profile-rank">${player.currentRank.icon} Level ${player.currentRank.level}</p>
                                <p class="profile-rank-name">${player.currentRank.name}</p>
                            </div>
                        </div>
                        
                        <div class="rank-progress">
                            <div class="progress-bar-container">
                                <div class="progress-bar" style="width: ${rankProgress}%"></div>
                            </div>
                            <p class="progress-text">Pr√≥ximo n√≠vel: ${player.currentRank.maxXP} XP</p>
                        </div>
                        
                        <div class="profile-stats">
                            <div class="stat-row">
                                <span class="stat-icon">‚≠ê</span>
                                <span class="stat-label">XP Total</span>
                                <span class="stat-value">${stats.totalXP}</span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-icon">üèÖ</span>
                                <span class="stat-label">Conquistas</span>
                                <span class="stat-value">${stats.achievementsCount}/${stats.totalAchievements}</span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-icon">‚ùì</span>
                                <span class="stat-label">Quiz Jogado</span>
                                <span class="stat-value">${stats.quizPlayed}x</span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-icon">üéØ</span>
                                <span class="stat-label">Desafio</span>
                                <span class="stat-value">${stats.challengeProgress}/15</span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-icon">üî•</span>
                                <span class="stat-label">Maior Streak</span>
                                <span class="stat-value">${stats.challengeStreak} dias</span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ==================== RENDER ACHIEVEMENTS ====================
        function renderAchievements() {
            const container = document.getElementById('achievements-grid');
            const allAchievements = RankingSystem.ACHIEVEMENTS;
            const andressa = RankingSystem.getPlayer('Andressa');
            const milena = RankingSystem.getPlayer('Milena');
            
            container.innerHTML = Object.values(allAchievements).map(achievement => {
                const andressaHas = andressa.achievements.includes(achievement.id);
                const milenaHas = milena.achievements.includes(achievement.id);
                
                return `
                    <div class="achievement-card ${!andressaHas && !milenaHas ? 'locked' : ''}">
                        <div class="achievement-icon">${achievement.icon}</div>
                        <h4 class="achievement-name">${achievement.name}</h4>
                        <p class="achievement-description">${achievement.description}</p>
                        ${achievement.xp > 0 ? `<p class="achievement-xp">+${achievement.xp} XP</p>` : ''}
                        <div class="achievement-owners">
                            ${andressaHas ? '<span class="owner-badge andressa">A</span>' : ''}
                            ${milenaHas ? '<span class="owner-badge milena">M</span>' : ''}
                            ${!andressaHas && !milenaHas ? '<span class="locked-badge">üîí</span>' : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ==================== CREATE PARTICLES ====================
        function createParticles() {
            const container = document.getElementById('particles-container');
            
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.style.position = 'absolute';
                particle.style.width = '3px';
                particle.style.height = '3px';
                particle.style.background = 'rgba(255, 30, 30, 0.5)';
                particle.style.borderRadius = '50%';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animation = `floatParticle ${Math.random() * 10 + 5}s linear infinite`;
                particle.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(particle);
            }
        }

        // Add particle animation
        const style = document.createElement('style');
        style.innerHTML = `
        @keyframes floatParticle {
            0% { transform: translateY(0) translateX(0); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-100vh) translateX(${Math.random() * 100 - 50}px); opacity: 0; }
        }
        `;
        document.head.appendChild(style);

        // ==================== MODAL FUNCTIONS ====================
        function confirmReset() {
            document.getElementById('reset-modal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('reset-modal').classList.add('hidden');
        }

        function resetAll() {
            if (confirm('√öLTIMA CONFIRMA√á√ÉO: Apagar TUDO mesmo?')) {
                RankingSystem.resetAll();
                closeModal();
                location.reload();
            }
        }

        // ==================== INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', () => {
            renderLeaderboard();
            renderProfiles();
            renderAchievements();
            createParticles();
        });
    </script>
</body>
</html>
